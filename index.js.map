{"version":3,"file":"index.js","sources":["../src/js/local-storage-api.js","../src/js/refs.js","../src/js/tasks.js","../src/js/theme-switcher.js","../src/js/update-counter.js","../src/js/render-tasks.js","../src/js/filter-tasks.js","../src/main.js"],"sourcesContent":["export const addDataToLS = (key, value) => {\n  try {\n    const normalaizeValue = JSON.stringify(value);\n    localStorage.setItem(key, normalaizeValue);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const getDataFromLS = key => {\n  try {\n    const value = localStorage.getItem(key);\n    // если value=null, то верни undefined, а если нет, то распарсь\n    return value === null ? undefined : JSON.parse(value);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const removeFromLS = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.log(error);\n  }\n};","export const refs = {\n  themeToggleBtn: document.querySelector('.theme-toggle-button'),\n  headerForm: document.querySelector('.header-form'),\n  taskInput: document.querySelector('.header-form-input'),\n  headerFormBtn: document.querySelector('.header-form-btn'),\n  emptyList: document.querySelector('.empty-list'),\n  tasksList: document.querySelector('.tasks-list'),\n  filterBtnAll: document.querySelector('.filter-btn-all'),\n  allCount: document.querySelector('.all-count'),\n  filterBtnCompleted: document.querySelector('.filter-btn-completed'),\n  completedCount: document.querySelector('.completed-count'),\n  filterBtnActive: document.querySelector('.filter-btn-active'),\n  activeCount: document.querySelector('.active-count'),\n  clearBtn: document.querySelector('.clear-btn'),\n};\n","import { refs } from './refs';\n\nexport const createTask = tasks => {\n  const markup = tasks\n    .map(\n      task => `\n      <li class=\"task-list-item ${task.completed ? 'completed' : ''}\">\n      <p>${task.discr}</p>\n      <div class=\"list-btn\">\n      <button class=\"task-list-btn done-btn ${\n        task.completed ? 'completed' : ''\n      }\" data-id=\"${task.id}\">✓</button>\n        <button class=\"task-list-btn delete-btn\" data-id=\"${task.id}\">⨉</button>\n      </div>\n    </li>`\n    )\n    .join('');\n\n  refs.tasksList.insertAdjacentHTML('beforeend', markup);\n};\n\n// очистка\nexport const clearList = () => {\n  refs.tasksList.innerHTML = '';\n};\n","import { refs } from './refs';\n\nconst moonIcon = document.getElementById('moonIcon');\nconst sunIcon = document.getElementById('sunIcon');\n\nconst applyTheme = theme => {\n  if (theme === 'light') {\n    document.body.classList.add('theme-light');\n    document.body.classList.remove('theme-dark');\n    sunIcon.classList.add('hidden');\n    moonIcon.classList.remove('hidden');\n  } else {\n    document.body.classList.remove('theme-light');\n    document.body.classList.add('theme-dark');\n    sunIcon.classList.remove('hidden');\n    moonIcon.classList.add('hidden');\n  }\n};\n\n// светлая тема - по умолчанию\nconst sevedTheme = localStorage.getItem('theme') || 'light';\napplyTheme(sevedTheme);\n\nconst onToggleTheme = () => {\n  // проверка активности светлой темы\n  const isCurrentlyLight = document.body.classList.contains('theme-light');\n\n  let newTheme;\n  if (isCurrentlyLight) {\n    newTheme = 'dark';\n  } else {\n    newTheme = 'light';\n  }\n\n  applyTheme(newTheme);\n  localStorage.setItem('theme', newTheme);\n};\n\nrefs.themeToggleBtn.addEventListener('click', onToggleTheme);\n","import { getDataFromLS } from './local-storage-api';\nimport { refs } from './refs';\n\nexport const updateTaskCounters = () => {\n  const tasks = getDataFromLS('tasks') || [];\n\n  const allCount = tasks.length;\n  const completedCount = tasks.filter(task => task.completed).length;\n  const activeCount = allCount - completedCount;\n\n  refs.allCount.textContent = allCount;\n  refs.completedCount.textContent = completedCount;\n  refs.activeCount.textContent = activeCount;\n};\n","import { refs } from './refs';\nimport { createTask } from './tasks';\nimport { getDataFromLS } from './local-storage-api';\nimport { updateTaskCounters } from './update-counter';\n\n// отрисовка сохранённых задач\nexport const renderSavedTasks = () => {\n  const savedTasks = getDataFromLS('tasks') || [];\n\n  const activeTasks = savedTasks.filter(task => !task.completed);\n  const completedTasks = savedTasks.filter(task => task.completed);\n  const sortedTasks = [...activeTasks, ...completedTasks];\n\n  if (sortedTasks.length > 0) {\n    refs.emptyList.classList.add('hidden');\n    createTask(sortedTasks);\n  } else {\n    refs.emptyList.classList.remove('hidden');\n  }\n\n  updateTaskCounters();\n};\n","import { refs } from './refs';\nimport { getDataFromLS } from './local-storage-api';\nimport { clearList, createTask } from './tasks';\n\nexport const filterTask = filter => {\n  const allTasks = getDataFromLS('tasks') || [];\n\n  let filteredTasks = [];\n\n  switch (filter) {\n    case 'completed':\n      filteredTasks = allTasks.filter(task => task.completed);\n      break;\n    case 'active':\n      filteredTasks = allTasks.filter(task => !task.completed);\n      break;\n    default:\n      filteredTasks = allTasks;\n\n      const activeTasks = allTasks.filter(task => !task.completed);\n      const completedTasks = allTasks.filter(task => task.completed);\n      filteredTasks = [...activeTasks, ...completedTasks];\n  }\n\n  clearList();\n\n  if (filteredTasks.length > 0) {\n    refs.emptyList.classList.add('hidden');\n    createTask(filteredTasks);\n  } else {\n    refs.emptyList.classList.remove('hidden');\n  }\n};\n","import {\n  addDataToLS,\n  getDataFromLS,\n  removeFromLS,\n} from './js/local-storage-api';\n\nimport { createTask, clearList } from './js/tasks';\nimport { refs } from './js/refs';\nimport './js/theme-switcher';\nimport { renderSavedTasks } from './js/render-tasks';\nimport { updateTaskCounters } from './js/update-counter';\nimport { filterTask } from './js/filter-tasks';\n\nrenderSavedTasks();\nupdateTaskCounters();\n\nconst onFormSubmit = event => {\n  event.preventDefault();\n\n  const currentInput = refs.taskInput.value.trim();\n  if (currentInput === '') return;\n\n  const task = {\n    id: crypto.randomUUID(),\n    discr: currentInput,\n    completed: false,\n  };\n\n  const tasks = getDataFromLS('tasks') || [];\n  tasks.push(task);\n\n  addDataToLS('tasks', tasks);\n  refs.emptyList.classList.add('hidden');\n  createTask([task]);\n  updateTaskCounters();\n  refs.headerForm.reset();\n};\n\nconst onTasksListClick = event => {\n  const target = event.target; // элемент, по которому клик\n  const taskItem = target.closest('.task-list-item'); // ищет ближайшего родителя с нужным классом\n  const taskId = target.dataset.id; // id таски (в разметке есть data-id=\"${task.id})\n\n  let tasks = getDataFromLS('tasks') || [];\n\n  // проверка клика по delete\n  if (target.classList.contains('delete-btn')) {\n    tasks = tasks.filter(task => task.id !== taskId);\n    addDataToLS('tasks', tasks);\n    updateTaskCounters();\n\n    if (taskItem) taskItem.remove();\n    if (tasks.length === 0) refs.emptyList.classList.remove('hidden');\n  }\n\n  // проверка клика по done\n  if (target.classList.contains('done-btn')) {\n    tasks = tasks.map(task => {\n      if (task.id === taskId) {\n        return { ...task, completed: !task.completed };\n      }\n      return task;\n    });\n\n    addDataToLS('tasks', tasks);\n    updateTaskCounters();\n    // taskItem.classList.toggle('completed');\n\n    const activeFilterBtn = document.querySelector('.filter-btn.active');\n    const currentFilter = activeFilterBtn?.dataset.filter || 'all';\n    filterTask(currentFilter);\n  }\n};\n\nconst onClearBtn = () => {\n  clearList();\n  removeFromLS('tasks');\n  updateTaskCounters();\n  refs.emptyList.classList.remove('hidden');\n};\n\nconst onFilterClick = event => {\n  const button = event.target.closest('button[data-filter]');\n  if (!button) return;\n\n  document\n    .querySelectorAll('.filter-btn')\n    .forEach(btn => btn.classList.remove('active'));\n\n  button.classList.add('active');\n\n  const filterType = button.dataset.filter;\n  filterTask(filterType);\n};\n\nrefs.filterBtnAll.parentElement.parentElement.addEventListener(\n  'click',\n  onFilterClick\n);\nrefs.headerForm.addEventListener('submit', onFormSubmit);\nrefs.tasksList.addEventListener('click', onTasksListClick);\nrefs.clearBtn.addEventListener('click', onClearBtn);\n"],"names":["addDataToLS","key","value","normalaizeValue","error","getDataFromLS","removeFromLS","refs","createTask","tasks","markup","task","clearList","moonIcon","sunIcon","applyTheme","theme","sevedTheme","onToggleTheme","isCurrentlyLight","newTheme","updateTaskCounters","allCount","completedCount","activeCount","renderSavedTasks","savedTasks","activeTasks","completedTasks","sortedTasks","filterTask","filter","allTasks","filteredTasks","onFormSubmit","event","currentInput","onTasksListClick","target","taskItem","taskId","activeFilterBtn","currentFilter","onClearBtn","onFilterClick","button","btn","filterType"],"mappings":"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"}